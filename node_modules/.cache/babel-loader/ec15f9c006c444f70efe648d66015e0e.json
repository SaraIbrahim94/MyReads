{"ast":null,"code":"var _jsxFileName = \"/Users/saraibrahim/Desktop/Tuts/React/starter/src/Components/Search.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useState, useCallback, useEffect } from \"react\";\nimport debounce from 'lodash.debounce';\nimport Books from './Books';\nimport { get } from \"../BooksAPI\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = \"https://reactnd-books-api.udacity.com\";\nlet token = localStorage.token;\nconst headers = {\n  Accept: \"application/json\",\n  Authorization: token\n};\nfunction Search() {\n  _s();\n  const [SearchResult, setSearchResult] = useState([]);\n  const [query, setSearchInput] = useState(\"\");\n  const SearchQueryHandler = event => {\n    setSearchInput(event.target.value);\n    // SearchQuery();\n  };\n\n  const debouncedSearchQuery = useCallback(debounce(SearchQueryHandler, 300), []);\n  console.log(SearchResult);\n  const SearchQuery = () => {\n    let maxResults = 17;\n    if (query !== \"\") {\n      fetch(`${api}/search`, {\n        method: \"POST\",\n        headers: {\n          ...headers,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          query,\n          maxResults\n        })\n      }).then(response => {\n        return response.json();\n      }).then(data => {\n        data.books.map(book => {\n          let book_data = get(book.id).then(data => {\n            return data.book;\n          });\n          console.log(book_data);\n        });\n        setSearchResult(data.books);\n      });\n    }\n  };\n  useEffect(() => {\n    SearchQuery();\n  }, [query]);\n\n  //console.log(Search.length)\n  if (SearchResult.length > 0) {\n    console.log('First :' + SearchResult.length);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-bar\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"close-search\",\n          to: \"/\",\n          children: \" Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-books-input-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search by title, author, or ISBN\",\n            onChange: debouncedSearchQuery\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-results\",\n        children: /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"books-grid\",\n          children: SearchResult.map(book => /*#__PURE__*/_jsxDEV(Books, {\n            book: book\n          }, book.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-bar\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"close-search\",\n          to: \"/\",\n          children: \" Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-books-input-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search by title, author, or ISBN\",\n            onChange: debouncedSearchQuery\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-results\",\n        children: /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"books-grid\",\n          children: \"No result for your Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this);\n  }\n}\n_s(Search, \"lVxk6tdmuxs5Y+ppUqs1fetTIQY=\");\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","Link","useState","useCallback","useEffect","debounce","Books","get","api","token","localStorage","headers","Accept","Authorization","Search","SearchResult","setSearchResult","query","setSearchInput","SearchQueryHandler","event","target","value","debouncedSearchQuery","console","log","SearchQuery","maxResults","fetch","method","body","JSON","stringify","then","response","json","data","books","map","book","book_data","id","length"],"sources":["/Users/saraibrahim/Desktop/Tuts/React/starter/src/Components/Search.js"],"sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom';\nimport { useState, useCallback, useEffect } from \"react\";\nimport debounce from 'lodash.debounce';\nimport Books from './Books'\nimport { get } from \"../BooksAPI\";\n\nconst api = \"https://reactnd-books-api.udacity.com\";\n\nlet token = localStorage.token;\nconst headers = {\n    Accept: \"application/json\",\n    Authorization: token,\n  };\n\nfunction Search() {\n    const [SearchResult, setSearchResult] = useState([]);\n    const [query, setSearchInput] = useState(\"\");\n\n    const SearchQueryHandler = (event) => {\n        setSearchInput(event.target.value);\n       // SearchQuery();\n    }\n    const debouncedSearchQuery= useCallback(\n        debounce(SearchQueryHandler, 300)\n   , []);\n        console.log(SearchResult)\n    const SearchQuery = () => {\n        let maxResults = 17;\n        if(query !== \"\"){\n            fetch(`${api}/search`, {\n                method: \"POST\",\n                headers: {\n                ...headers,\n                \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({ query, maxResults }),\n            })\n            .then(response => {\n                return response.json()\n            })\n            .then(data => {\n                data.books.map((book) => {\n                    let book_data = get(book.id).then((data) => {return data.book});\n                    console.log(book_data)\n                })\n                setSearchResult(data.books)\n            })\n        }\n     }\n  \n\n    useEffect(() => {\n        SearchQuery()\n    }, [query]);\n\n    //console.log(Search.length)\n    if(SearchResult.length > 0 ){\n        console.log('First :' + SearchResult.length )\n        return (\n            <div className=\"search-books\">\n                <div className=\"search-books-bar\">\n                    <Link className=\"close-search\" to=\"/\"> Close</Link>\n\n                <div className=\"search-books-input-wrapper\">\n                    <input\n                    type=\"text\"\n                    placeholder=\"Search by title, author, or ISBN\"\n                    onChange={debouncedSearchQuery}\n                    />\n                </div>\n                </div>\n                <div className=\"search-books-results\">\n                <ol className=\"books-grid\">\n                    {SearchResult.map((book) => (\n                        <Books key={book.id} book={book}></Books>\n                    ))} \n                </ol>\n                </div>\n            </div>\n        )\n    }else{\n        return (\n            <div className=\"search-books\">\n                <div className=\"search-books-bar\">\n                    <Link className=\"close-search\" to=\"/\"> Close</Link>\n\n                <div className=\"search-books-input-wrapper\">\n                    <input\n                    type=\"text\"\n                    placeholder=\"Search by title, author, or ISBN\"\n                    onChange={debouncedSearchQuery}\n                    />\n                </div>\n                </div>\n                <div className=\"search-books-results\">\n                <ol className=\"books-grid\">\n                   No result for your Search\n                </ol>\n                </div>\n            </div>\n        )\n    }\n\n}\n\n\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}